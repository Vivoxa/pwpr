<div id="main-container" class="container">
  <div class="card">
    <h3 class="card-header"></h3>

    <div class="row">
      <%= form_for(@business) do |f| %>
          <% if @business.errors.any? %>
              <div id="error_explanation">
                <h2><%= pluralize(@business.errors.count, "error") %> prohibited this business from being saved:</h2>

                <ul>
                  <% @business.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
          <% end %>



          <% if @scheme_id %>
              <%= f.collection_select :scheme_id, Scheme.where(id: @scheme_id), :id, :name, {}, {class: "devise-lgn form-control", style: "display:none"} %>
              <% f.hidden_field :scheme_id, value: @scheme_id %>
          <% elsif @schemes %>
              <div class="field centre">
                <%= f.label 'Active Schemes', class: "devise-lgn" %>
                <%= f.collection_select :scheme_id, @schemes.where(active: true).order(:name), :id, :name, {include_blank: 'Select a Scheme'}, {id: 'scheme_id_select', class: "devise-lgn form-control"} %>
              </div>
          <% end %>

          <div class="field centre">
            <%= f.label 'Business Type', class: "devise-lgn" %>
            <%= f.collection_select :business_type_id, @business_types, :id, :name, {include_blank: 'Select a Business Type'}, {id: 'business_type_select', class: "devise-lgn form-control"} %>
          </div>

          <div class="field centre">
            <%= f.label 'Business Subtype', class: "devise-lgn" %>
            <%= f.collection_select :business_subtype_id, @business_subtypes, :id, :name, {include_blank: 'Select a Business Subtype'}, {id: 'business_subtype_select', onchange: "return subsidiaryCo(this);", class: "devise-lgn form-control"} %>
          </div>

          <div id='holding_companies'>
          </div>

          <div class="field centre">
            <%= f.text_field :name, placeholder: 'Name', class: "devise-lgn form-control" %>
          </div>

          <div class="field centre">
            <%= f.text_field :company_number, placeholder: 'Company number', class: "devise-lgn form-control" %>
          </div>

          <div class="field centre">
            <%= f.text_field :scheme_ref, placeholder: 'Scheme Ref', class: "devise-lgn form-control" %>
          </div>

          <div class="field centre">
            <%= f.text_field :NPWD, placeholder: 'NPWD', class: "devise-lgn form-control" %>
          </div>

          <div class="field centre">
            <%= f.collection_select :sic_code_id, SicCode.all, :id, :code, {include_blank: 'Select a Sic Code'}, {class: "devise-lgn form-control"} %>
          </div>

          <div class="field centre">
            <%= f.collection_select :scheme_status_code_id, @scheme_status_codes, :id, :code, {include_blank: 'Select Scheme Status'}, {class: "devise-lgn form-control"} %>
          </div>

          <div class="field centre">
            <%= f.collection_select :registration_status_code_id, @registration_status_codes, :id, :code, {include_blank: 'Select Reg Status'}, {class: "devise-lgn form-control"} %>
          </div>

          <div class="field centre">
            <%= f.label 'Small producer', class: "devise-lgn" %>
            <%= f.select :small_producer, options_for_select([['Yes', true], ['No', false]], @business.small_producer), {include_blank: 'Select Yes or No'}, {class: "devise-lgn form-control"} %>
          </div>

          <div class="field centre">
            <%= f.label 'Country of business registration', class: "devise-lgn" %>
            <%= f.collection_select :country_of_business_registration_id, @country_of_business_registrations, :id, :country, {include_blank: 'Select a Country'}, {id: 'business_country_select', class: "devise-lgn form-control"} %>
          </div>

          <div class="field centre">
            <%= f.select :year_first_reg, options_for_select(LookupValues::ValidYears.for('first_registered')), {prompt: true, prompt: 'First year registered?'}, class: "devise-lgn form-control" %>
          </div>

          <div class="field centre">
            <%= f.select :year_last_reg, options_for_select(LookupValues::ValidYears.for('first_registered')), {prompt: true, prompt: 'Last year registered?'}, class: "devise-lgn form-control" %>
          </div>

          </div>
          <div class="card-footer">
            <%= f.submit 'Save', class: 'btn btn-primary' %>
            <%= link_to 'Back', :back, class: 'btn btn-success' %>
      <% end %>
      </div>
      </div>
</div>